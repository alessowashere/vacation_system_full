# Sistema de Gesti√≥n de Vacaciones v2.0

Este es un sistema web integral para la gesti√≥n del flujo de solicitudes de vacaciones, dise√±ado para uso corporativo interno. La aplicaci√≥n est√° construida con FastAPI y utiliza Docker para un despliegue sencillo.

La caracter√≠stica principal de esta versi√≥n es la integraci√≥n total con **Google Workspace (OAuth 2.0)**, eliminando la necesidad de contrase√±as locales y centralizando el acceso a trav√©s de las cuentas de correo institucionales.

## üöÄ Caracter√≠sticas Principales

* **Autenticaci√≥n Segura:** Login exclusivo con Google (OAuth 2.0), restringido a un dominio corporativo (ej. `@uandina.edu.pe`).
* **Gesti√≥n de Roles:** Sistema de permisos robusto con 4 niveles:
    * **Empleado:** Crea solicitudes y ve sus propios estados.
    * **Manager (Jefe):** Ve el dashboard de su √°rea, gestiona solicitudes de modificaci√≥n y suspensi√≥n.
    * **HR (RRHH):** Aprueba o rechaza solicitudes finales, ve todos los dashboards.
    * **Admin:** Control total del sistema, incluyendo la gesti√≥n de usuarios.
* **Panel de Administraci√≥n:**
    * **Gesti√≥n de Usuarios:** Crear, editar y asignar roles, √°reas, d√≠as de vacaciones y jefes.
    * **Gesti√≥n de Feriados:** A√±adir o eliminar d√≠as festivos.
    * **Ajustes del Sistema:** Configurar reglas de negocio (ej. permitir iniciar en fin de semana).
* **Flujo de Aprobaci√≥n Completo:**
    * Empleado crea (Borrador).
    * Jefe env√≠a a RRHH (Pendiente RRHH).
    * RRHH Aprueba o Rechaza.
    * Jefe puede solicitar Modificaci√≥n o Suspensi√≥n de solicitudes aprobadas/rechazadas.
* **Carga Masiva de Datos:** Script para poblar toda la base de datos de usuarios y jerarqu√≠as desde un archivo CSV.
* **Base de Datos Modular:** Usa Alembic para manejar las migraciones de la base de datos.

## üõ†Ô∏è Stack Tecnol√≥gico

* **Backend:** FastAPI, SQLAlchemy, Alembic, Authlib, Uvicorn
* **Frontend:** Jinja2, Tailwind CSS
* **Base de Datos:** MySQL
* **Despliegue:** Docker, Docker Compose

## üìã Gu√≠a de Instalaci√≥n y Puesta en Marcha

Sigue estos pasos para levantar el proyecto desde cero.

### 1. Configuraci√≥n de Google Cloud (Pre-requisito)

Antes de lanzar la aplicaci√≥n, debes registrarla en Google Cloud para obtener las credenciales de OAuth.

1.  Ve a [console.cloud.google.com](https://console.cloud.google.com/) con tu cuenta de administrador de Google Workspace.
2.  Crea un **Proyecto Nuevo** (ej. "Sistema Vacaciones RRHH").
3.  Ve a **APIs y Servicios** > **Pantalla de consentimiento de OAuth**.
4.  Selecciona **"Interno"** como Tipo de Usuario y rellena los datos (Nombre de la app, correo de asistencia, etc.).
5.  En **"Dominios autorizados"**, a√±ade `uandina.edu.pe`.
6.  Ve a **APIs y Servicios** > **Credenciales**.
7.  Haz clic en **+ Crear Credenciales** > **ID de cliente de OAuth**.
8.  Selecciona **"Aplicaci√≥n web"**.
9.  En **"URIs de redireccionamiento autorizados"**, a√±ade la URL exacta desde donde acceder√°s al sistema.
    * **Ejemplo de tu configuraci√≥n:** `http://dataepis.uandina.pe:49262/gestion/auth/google/callback`
10. Guarda y **copia tu `ID de cliente` y `Secreto de cliente`**.

### 2. Configuraci√≥n del Proyecto

Edita el archivo `docker-compose.yml` para incluir tus credenciales.

```yaml
services:
  app:
    # ...
    environment:
      # ... (Configuraci√≥n de la Base de Datos)
      - DB_HOST=vacation_db
      - DB_USER=admin
      - DB_PASSWORD=Redlabel@
      - DB_NAME=vacation_system
      
      # --- PEGA TUS CLAVES DE GOOGLE AQU√ç ---
      - GOOGLE_CLIENT_ID=TU_ID_DE_CLIENTE_VA_AQUI
      - GOOGLE_CLIENT_SECRET=TU_SECRETO_DE_CLIENTE_VA_AQUI
      
    # ...